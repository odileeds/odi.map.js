<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8" />
	<link rel="icon" href="../resources/favicon.svg" />
	<title>ODI Leeds Tiny Slippy Map</title>
	<script src="../resources/highlight.pack.js"></script>
	<link rel="StyleSheet" href="../resources/highlight.css" type="text/css" />
	<link rel="StyleSheet" href="../resources/style.css" type="text/css" />
</head>
<body class="b6-bg">

	<header>
		<div class="b1-bg padded">
			<div class="holder" style="text-align:center;">
				<a href="https://odileeds.org/" aria-label="ODI Leeds"><img src="../resources/odileeds.svg" style="width:250px;height:91px;" /></a>
				<h1><a href="../index.html">Tiny Slippy Map Library</a></h1>
			</div>
		</div>
	</header>
	<div class="padded">
		<div class="holder">
			<section class="example" id="ex1">
				<h2>Example: Adding a GeoJSON layer</h2>
				<p>In this example we use Esri WorldGreyCanvas tiles and add a simple GeoJSON layer which we style. To keep the core library small, GeoJSON support is provided via a plugin. Only very limited GeoJSON functionality has been implemented - the <code>style</code> property. There is support for the following GeoJSON geometry types: <code>Point</code>, <code>LineString</code>, <code>MultiLineString</code>, <code>Polygon</code>, and <code>MultiPolygon</code>.</p>
				<div class="example-code">
					<script src="../odi.map.js"></script>
					<script src="../odi.map.geojson.js"></script>
					<link rel="StyleSheet" href="../odi.map.css" type="text/css" />
					<div id="map" class="map"></div>
					<style>
					/* Define the size of the map area */
					#map { height: 320px; width: 100%; }
					</style>
					<script>
					var map;
					ODI.ready(function(){
						var geojson = {
							"type": "FeatureCollection", 
							"features": [
								{"type": "Feature","properties": {"type":"shop","name":"Cooperative"},"geometry": {"type": "Point","coordinates": [-1.53673,53.79635]}},
								{"type": "Feature","properties": {"type":"shop","name":"Morrisons","size":"large"},"geometry": {"type": "Point","coordinates": [-1.5449586,53.8021905]}},
								{"type": "Feature","properties": {"type":"shop","name":"Sainsburys"},"geometry": {"type": "Point","coordinates": [-1.54360,53.79961]}},
								{"type": "Feature","properties": {"type":"shop","name":"Sainsburys"},"geometry": {"type": "Point","coordinates": [-1.54436,53.79596]}},
								{"type": "Feature","properties": {"type":"shop","name":"Sainsburys"},"geometry": {"type": "Point","coordinates": [-1.5450275,53.7977083]}},
								{"type": "Feature","properties": {"type":"shop","name":"Sainsburys"},"geometry": {"type": "Point","coordinates": [-1.5448719,53.8013557]}},
								{"type": "Feature","properties": {"type":"shop","name":"Tesco"},"geometry": {"type": "Point","coordinates": [-1.54535,53.79590]}},
								{"type": "Feature","properties": {"type":"shop","name":"Tesco"},"geometry": {"type": "Point","coordinates": [-1.5462370,53.7977282]}},
								{"type": "Feature","properties": {"type":"park"},"geometry": {"type": "Polygon","coordinates": [[[-1.5356236696243286,53.79638620351626],[-1.5356746315956116,53.79603132679832],[-1.5343844890594482,53.79620084417656],[-1.5343496203422546,53.79631808009345],[-1.5344139933586118,53.79637194513458],[-1.5356236696243286,53.79638620351626]]]}},
								{"type": "Feature","properties": {"type":"park"},"geometry": {"type": "Polygon","coordinates": [[[-1.5342825651168823,53.79614064182162],[-1.53571218252182,53.79592518005375],[-1.5357255935668945,53.79565901987109],[-1.5357014536857605,53.79551168047222],[-1.5346929430961609,53.79544513992887],[-1.5344837307929993,53.79556396225364],[-1.5343523025512693,53.79559881673839],[-1.5343093872070312,53.795755661561294],[-1.5342825651168823,53.79614064182162]]]}},
								{"type": "Feature","properties": {"type":"park"},"geometry": {"type": "Polygon","coordinates": [[[-1.5364685654640198,53.795850718744255],[-1.5364524722099304,53.795836460180546],[-1.5360930562019348,53.79586656158713],[-1.5360662341117859,53.795754077273095],[-1.5368950366973877,53.7956558512873],[-1.5369191765785217,53.79564159265736],[-1.5368655323982239,53.795592479561506],[-1.5363076329231262,53.79553386062989],[-1.5358570218086243,53.79552593914635],[-1.535865068435669,53.79558297379437],[-1.5359213948249817,53.79563683977962],[-1.5359213948249817,53.79566694132948],[-1.5358811616897583,53.795700211438394],[-1.5358677506446836,53.795910921515365],[-1.5364685654640198,53.795850718744255]]]}},
								{"type":"Feature","properties": {"type":"route"},"geometry":{"type":"LineString","coordinates":[[-1.5598011016845703,53.79714664351466],[-1.556936502456665,53.79688049108364],[-1.5535461902618408,53.79658265183673],[-1.550745964050293,53.79632283289399],[-1.550145149230957,53.79732407753031],[-1.5495872497558592,53.79779300667231],[-1.549072265625,53.79772963817574],[-1.5476238727569578,53.79685514314495],[-1.5471303462982178,53.79659532589033],[-1.5471518039703367,53.796246788020895],[-1.5461218357086182,53.79593627002469],[-1.5449523925781248,53.795765167289275],[-1.5432894229888916,53.7959806298792],[-1.5423667430877686,53.7960376639089],[-1.5409505367279053,53.79595528139667],[-1.5396201610565186,53.79654462965297],[-1.5376245975494385,53.79647492222655],[-1.5348994731903076,53.79649393335434],[-1.5341269969940186,53.79653195558405]]}},
								{"type":"Feature","properties": {"type":"route"},"geometry":{"type":"MultiLineString","coordinates":[[[-1.540231704711914,53.7976662695834],[-1.539759635925293,53.79889560318486],[-1.5450918674468994,53.79947857353297]],[[-1.5490829944610593,53.79959263200102],[-1.5506494045257568,53.79961164171551],[-1.5513253211975098,53.79806549011647],[-1.5520656108856201,53.79819856278296],[-1.5519368648529053,53.79849639055407]]]}}
							]
						};

						map = new ODI.map(document.getElementById('map'),{
							'center': [53.7994643,-1.5450380],
							'zoom': 15
						});
						
						// Create a tile layer that has no labels
						ODI.map.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
							attribution: 'Tiles © Esri — Esri, DeLorme, NAVTEQ',
							maxZoom: 16
						}).addTo(map);
						
						ODI.map.geoJSON(geojson,{
							// Style the features depending on their properties
							'style':function(feature){
								p = {};
								if(feature.properties.type=="route"){
									p.stroke = '#2254F4'
									p['stroke-width'] = 3;
								}
								if(feature.properties.type=="park"){
									p.fill = '#67E767';
								}
								if(feature.properties.type=="shop"){
									if(feature.properties.size=="large") p.r = 8;

									if(feature.properties.name) p.title = feature.properties.name;
									if(feature.properties.name=="Cooperative") p.fill = '#00b3de';
									if(feature.properties.name=="Morrisons") p.fill = '#007531';
									if(feature.properties.name=="Sainsburys") p.fill = '#f06c00';
									if(feature.properties.name=="Tesco") p.fill = '#0a55a0';
								}
								return p;
							}
						}).addTo(map);
					});
					</script>
				</div>
			</section>

		</div>
	</div>
	<footer>
		<div class="holder">
		<p>&copy; 2021 <a href="https://odileeds.org/" target="_parent">ODI Leeds</a> (<a href="https://creativecommons.org/licenses/by/4.0/" target="_parent">CC BY</a>). Find the <a href="https://github.com/odileeds/odi.map.js">code on Github</a>.</p>
		</div>
	</footer>
	<script src="../resources/odi.formatexamples.js"></script>
	<script src="https://odileeds.org/resources/odi.log.js"></script>
	<script>
	ODI.log.setup({'id':'odileeds','target':['odileeds.github.io']}).add('action=view');
	</script>
</body>
</html>